# Spring Cloud Eureka

> 本章节的代码：https://github.com/wicksonZhang/Spring-Cloud

## 基础概念

### Eureka 是什么？

* `Eureka` 是 `Netflix` 团队开发的一个注册中心组件，`Eureka` 在 `Spring Cloud` 体系中主要的作用是允许服务互相发现和通信。

* 在 `Eureka` 组件中有如下两个比较重要的角色：

  * `Eureka Server`：`Eureka` 服务端负责维护服务实例的注册表。所有的服务实例都会向 `Eureka Server` 注册自己的位置和状态信息，并定期更新。
  * `Eureka Client`： `Eureka` 客户端会向 `Eureka` 服务端注册自己，并从服务器获取其他服务的信息，以便实现服务之间的通信。

* 如下是 `Spring Cloud` 体系中 `Eureka` 组件在其中发挥的作用：

  <img src="https://cdn.jsdelivr.net/gh/wicksonZhang/static-source-cdn/images/202312281455088.png" alt="image-20231228145552037" style="zoom:80%;float:left" />

* 最后我们通过一个例子总结一下：
  * 想象一下你入职一家新公司，就像使用 Eureka 的服务发现机制一样。当你需要办理入职手续或者与其他部门的同事交流时，你并不需要自己去了解每个人的位置和联系方式。相反，你可以通过公司的内部联系系统（就像 Eureka 服务器一样），在其中找到你需要的同事或资源的位置信息。这种服务发现的机制让你能够更迅速地定位和联系到公司内部的各个部门或同事，类似于使用 Eureka 找到服务实例，你可以轻松地找到需要的人或资源，然后进行有效的沟通和协作。

### Eureka 的优缺点

**优点**

* **高可用性**：`Eureka` 服务器本身支持高可用性配置，可以部署多个实例以防止单点故障，提高系统的稳定性。
* **易于集成：** Eureka 对于许多云服务和框架都有良好的集成性，如与Spring Cloud等主流框架配合使用。
* **轻量级：** 相对较小的内存占用和开销，适用于各种规模的应用。

**缺点**

* **单点故障**：Eureka 在单个实例故障时可能导致整个服务发现系统的不可用。虽然使用集群可以避免这个问题，但是这也是一个潜在的风险。
* **复杂性管理**：随着服务的增加，管理多个 `Eureka` 服务器和大量实例可能会变得复杂。



### Eureka 解决了什么问题

* **服务注册和发现**

  * 在上面章节已经讲过，Eureka 允许服务实例自动注册到注册中心报告自己的位置和状态。这使得服务通信之间更加简单。
  * 例如我们上一章节的案例，我们不使用 `Eureka`会产生的问题，我们直接就将相关的服务地址写死了。

  <img src="https://cdn.jsdelivr.net/gh/wicksonZhang/static-source-cdn/images/202312281543801.png" alt="image-20231228154320764" style="zoom:100%;float:left" />

  

* **服务健康检查**

  * Eureka 可以监控服务实例的健康状态，定期发送心跳来告知注册中心其状态，这有助于实现自动发现故障实例并剔除出服务池，确保系统的可靠性。
  * 我们还是以上面的案例为例，如果 服务 `02-spring-cloud-payment-2100` 出现故障但是在服务 `02-spring-cloud-order-2000` 不知道，这会导致服务的不可靠性。



* **简化了服务间通信** 
  * 通过 Eureka 注册中心，服务之间的通信变得更加简单，服务实例的位置信息可以动态地从注册中心获取，而不需要硬编码或手动配置服务地址。



## Eureka 单机操作









## Eureka 集群操作